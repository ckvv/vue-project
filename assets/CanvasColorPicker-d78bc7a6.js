import{d as w,I as g,c as _,e as y,A as i,H as C,g as f,J as x,o as I}from"./index-07d2ea4b.js";const B=w({__name:"CanvasColorPicker",setup(R){const o=g(),s=g(""),c=_(()=>(o==null?void 0:o.value)&&o.value.getContext("2d")),u=()=>{let r,e;return[new Promise((t,n)=>{r=t,e=n}),r,e]},v=r=>{const[e,a,t]=u(),n=new FileReader;return n.addEventListener("loadend",l=>{var d;(d=l.target)!=null&&d.result?a(l.target.result):t(new Error("Read file fail"))}),n.addEventListener("error",l=>{t(l)}),n.readAsDataURL(r),e},m=r=>{const[e,a,t]=u(),n=new Image;return n.src=r,n.onload=()=>{a(n)},n.onerror=l=>{t(l)},e},h=async r=>{var t;const e=r.target.files;if(!(e!=null&&e.length))return;const a=await m(await v(e[0]));o.value&&(o.value.width=a.width,o.value.height=a.height),(t=c.value)==null||t.drawImage(a,0,0,a.width,a.height)},p=r=>{if(c.value&&o.value){const{top:e,left:a}=o.value.getBoundingClientRect(),t=c.value.getImageData(r.x-a,r.y-e,1,1).data;s.value=`rgba(${t[0]} ${t[1]} ${t[2]} /${t[3]})`}};return(r,e)=>(I(),y("div",null,[i("div",{style:x({color:f(s)})}," 选择一张图片获取当前颜色: "+C(f(s)),5),i("input",{id:"file",type:"file",accept:"image/*",onChange:h},null,32),i("canvas",{id:"offscreen",ref_key:"canvasRef",ref:o,onMousemove:p},null,544)]))}});export{B as default};
