import{d as w,V as h,c as y,R as _,a as C,e as c,W as k,h as x,l as D,n as I,o as b,X as R}from"./index-D5pOl4lT.js";const B=w({__name:"CanvasColorPicker",setup(E){navigator.mediaDevices.getUserMedia({audio:{}});const r=h(),o=h(new Uint8ClampedArray([0,0,0,0])),i=y(()=>(r==null?void 0:r.value)&&r.value.getContext("2d",{willReadFrequently:!0}));function u(){let l,e;return[new Promise((n,t)=>{l=n,e=t}),l,e]}function v(l){const[e,a,n]=u(),t=new FileReader;return t.addEventListener("loadend",s=>{var d;(d=s.target)!=null&&d.result?a(s.target.result):n(new Error("Read file fail"))}),t.addEventListener("error",s=>{n(s)}),t.readAsDataURL(l),e}function g(l){const[e,a,n]=u(),t=new Image;return t.src=l,t.onload=()=>{a(t)},t.onerror=s=>{n(s)},e}function f(l,e){const a=new ImageData(l,e),n=a.data.length;for(let t=0;t<n;t+=4){const s=t%(l*4)/(l*4)*255,d=t/(l*4)/e*255;a.data[t+0]=s,a.data[t+1]=d,a.data[t+2]=255-s,a.data[t+3]=255}return r.value&&(r.value.width=l,r.value.height=e),a}_(()=>{i.value&&i.value.putImageData(f(200,200),0,0)});async function m(l){var n;const e=l.target.files;if(!(e!=null&&e.length))return;const a=await g(await v(e[0]));r.value&&(r.value.width=a.width,r.value.height=a.height),(n=i.value)==null||n.drawImage(a,0,0,a.width,a.height)}function p(l){if(i.value&&r.value){const{top:e,left:a}=r.value.getBoundingClientRect();o.value=i.value.getImageData(l.x-a,l.y-e,1,1).data}}return(l,e)=>(b(),C("div",null,[c("div",{style:I({color:`rgba(${o.value[0]} ${o.value[1]} ${o.value[2]} /${o.value[3]})`})},[x(" 获取图片中的颜色: "+D(o.value)+", ",1),c("input",{id:"file",type:"file",accept:"image/*",onChange:m},null,32)],4),c("canvas",{ref_key:"canvasRef",ref:r,onMousemove:p},null,544),e[0]||(e[0]=k('<div class="jian-bian w-100 h-10" data-v-a8d9a898></div><div class="w-100 h-10" style="background:linear-gradient(to left, hsl(0, 100%, 50%), hsl(60, 100%, 50%), hsl(120, 100%, 50%), hsl(180, 100%, 50%), hsl(240, 100%, 50%), hsl(300, 100%, 50%), hsl(360, 100%, 50%) );" data-v-a8d9a898></div><div class="w-100 h-10" style="background:linear-gradient(to right, red 0%, orange 20%, yellow 40%, green 60%, blue 80%, indigo 100%);" data-v-a8d9a898></div><div class="w-100 h-10" style="background:linear-gradient(to right, hsl(0, 100%, 50%), hsl(30, 100%, 50%), hsl(60, 100%, 50%), hsl(90, 100%, 50%), hsl(120, 100%, 50%), hsl(150, 100%, 50%), hsl(180, 100%, 50%), hsl(210, 100%, 50%), hsl(240, 100%, 50%), hsl(270, 100%, 50%), hsl(300, 100%, 50%), hsl(330, 100%, 50%), hsl(360, 100%, 50%) );" data-v-a8d9a898></div><div class="w-100 h-10" style="background:linear-gradient(to right, hsl(0, 100%, 50%), hsl(60, 100%, 50%), hsl(120, 100%, 50%), hsl(180, 100%, 50%), hsl(240, 100%, 50%), hsl(300, 100%, 50%), hsl(360, 100%, 50%) );" data-v-a8d9a898></div>',5))]))}}),M=R(B,[["__scopeId","data-v-a8d9a898"]]);export{M as default};
